<h2 class="text-center">Account Details</h2>

<div class="container col-md-4 col-md-offset-4">

    <div class="form-group ">
        <label for="accountId">Account ID</label>
        <input  type="text" class="form-control" id="accountId" value="{{ UserDetailsViewModel.id }}" readonly>
    </div>

    <div class="form-group">
        <label for="firstName">First Name</label>
        <input  type="text" class="form-control" id="firstName" value="{{ UserDetailsViewModel.firstName }}" readonly>
    </div>
    
    <div class="form-group">
        <label for="lastName">Last Name</label>
        <input  type="text" class="form-control" id="lastName" value="{{ UserDetailsViewModel.lastName }}" readonly>
    </div>


<div class="panel-group" id="accordion">
  <div class="panel panel-default">
    <div class="panel-heading">
      <h4 class="panel-title">
        <a class="pull-right" data-toggle="collapse" data-parent="#accordion" href="#collapse1">
        Edit</a>
        <label>Email Address</label>
        <label class="center-block title">{{ UserDetailsViewModel.email }}</label>
      </h4>
    </div>
    <form id="collapse1" class="panel-collapse collapse">
      <div class="panel-body form-group">
        <label for="email">New Email address</label>
        <input ngModel name="email" #email="ngModel" type="email" class="form-control" id="email" (change)="this.CompareEmails(email,confirmEmail)">

        <label for="confirmEmail">Confirm Email address</label>
        <input ngModel name="confirmEmail" #confirmEmail="ngModel"  type="email" class="form-control" id="confirmEmail" (change)="this.CompareEmails(email,confirmEmail)">
        <div class="alert alert-danger" *ngIf="email.touched && confirmEmail.touched && !EmailConfirmation">Please Make sure both Emails match each other.</div>
        <button [disabled]="!EmailConfirmation" type="reset" class="btn btn-success pull-right" (click)="ChangeEmail(confirmEmail.value)">Save</button>
      </div>
    </form>
  </div>


  <div class="panel panel-default">
    <div class="panel-heading">
      <h4 class="panel-title">
        <a class="pull-right" data-toggle="collapse" data-parent="#accordion" href="#collapse2">
        Edit</a>
        <label>Password</label>
        <label class="center-block title">*******</label>
      </h4>
    </div>
    <form id="collapse2" class="panel-collapse collapse">
      <div class="panel-body form-group">
        <label for="currentPassword">Current Password</label>
        <input ngModel name="currentPassword" #currentPassword="ngModel" type="password" class="form-control" id="currentPassword" (change)="this.ComparePasswords(password ,confirmPassword)">

        <label for="password">New Password</label>
        <input ngModel name="password" #password="ngModel" type="password" class="form-control" id="password" value="">

        <label for="confirmPassword">Confirm New Password</label>
        <input ngModel name="confirmPassword" #confirmPassword="ngModel"  type="password" class="form-control" id="confirmPassword" (change)="this.ComparePasswords(password ,confirmPassword)">
        <div class="alert alert-danger" *ngIf="password.touched && confirmPassword.touched && !PasswordConfirmation">Please Make sure both passwords match each other.</div>
        <button [disabled]="!PasswordConfirmation" type="reset" class="btn btn-success pull-right" (click)="ChangePassword(currentPassword.value ,confirmPassword.value)">Save</button>
      </div>
    </form>
  </div>


  <div class="panel panel-default">
    <div class="panel-heading">
      <h4 class="panel-title">
        <a class="pull-right" data-toggle="collapse" data-parent="#accordion" href="#collapse3">
        Edit</a>
        <label>Username</label>
        <label class="center-block title">{{ UserDetailsViewModel.userName }}</label>
      </h4>
    </div>
    <div id="collapse3" class="panel-collapse collapse">
      <div class="panel-body form-group">
        <label for="username">New Username</label>
        <input  ngModel #username = "ngModel" type="email" class="form-control" id="username" value="">
        <button type="reset" class="btn btn-success pull-right" (click)="ChangeUsername(username.value)">Save</button>
        </div>
    </div>
  </div>


  <div class="panel panel-default">
    <div class="panel-heading">
      <h4 class="panel-title">
        <a class="pull-right" data-toggle="collapse" data-parent="#accordion" href="#collapse4">
        Edit</a>
        <label>Address</label>
        <label class="center-block title">{{ UserDetailsViewModel.address }}</label>
      </h4>
    </div>
    <div id="collapse4" class="panel-collapse collapse">
      <div class="panel-body form-group">
        <label for="address">New Address</label>
        <input ngModel #address="ngModel" type="text" class="form-control" id="address" value="{{ UserDetailsViewModel.address }}">
        <button type="reset" class="btn btn-success pull-right" (click)="ChangeAddress(address.value)">Save</button>
      </div>
    </div>
  </div>


  <div class="panel panel-default">
    <div class="panel-heading">
      <h4 class="panel-title">
        <a class="pull-right" data-toggle="collapse" data-parent="#accordion" href="#collapse5">
        Edit</a>
        <label>Phone Number</label>
        <label class="center-block title">{{ UserDetailsViewModel.phonenumber }}</label>
      </h4>
    </div>
    <div id="collapse5" class="panel-collapse collapse">
      <div class="panel-body form-group">
        <label for="phone">New Phone Number</label>
        <input ngModel #phone="ngModel" type="text" class="form-control" id="phone" value="{{ UserDetailsViewModel.phonenumber }}">
        <button type="reset" class="btn btn-success pull-right" (click)="ChangePhone(phone.value)">Save</button>
      </div>
    </div>
  </div>


  <div class="panel panel-default">
    <div class="panel-heading">
      <h4 class="panel-title">
        <a class="pull-right" data-toggle="collapse" data-parent="#accordion" href="#collapse6">
        Edit</a>
        <label>City</label>
        <label class="center-block title">{{ UserDetailsViewModel.cityName }}</label>
      </h4>
    </div>
    <div id="collapse6" class="panel-collapse collapse">
      <div class="panel-body form-group">
        <label>New City</label>
        <select #city (change)="OnCityChange(city)">
            <option hidden>{{ UserDetailsViewModel.cityName }}</option>
            <option *ngFor="let item of cities" [value]="item.id">{{ item.cityName }}</option>
          </select>
          <label>Please Choose a new area after changing your city.</label>
      </div>
    </div>
</div>


  <div class="panel panel-default">
        <div class="panel-heading">
          <h4 class="panel-title">
            <a class="pull-right" data-toggle="collapse" data-parent="#accordion" href="#collapse7">
            Edit</a>
            <label>Area</label>
            <label class="center-block title">{{ UserDetailsViewModel.areaName }}</label>
          </h4>
        </div>
        <div id="collapse7" class="panel-collapse collapse">
          <div class="panel-body form-group">
            <select required ngModel name="areaID" #areaID="ngModel" >
				<option *ngFor="let item of areas" [value]="item.id">{{ item.areaName}}</option>
      </select>
      <button type="reset" class="btn btn-success pull-right" (click)="ChangeArea(areaID.value)">Save</button>
            </div>
        </div>
</div>
  


<a class="btn btn-block" id="btnBack" [routerLink]="['/profile/']" >Back</a>


</div>